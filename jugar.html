<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>JUGAR</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata">
	<style>
	canvas 
	{
		padding: 0;
    margin: auto;
    position: absolute;
    left: 0;
    right: 0;
	}
	body, html 
	{
		height: 100%;
		font-family: "Inconsolata", sans-serif;
		vertical-align: center;
	}
  </style>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/p5.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/addons/p5.dom.js"></script>
	<script type="text/javascript" src="player.js"></script>
	<script type="text/javascript" src="tile.js"></script>
  <script type="text/javascript" src="sketch.js"></script>
</head>
<body>

	<!-- Parte superior de la ventana -->
	
	<div class="w3-top">
		<center>
	  <div class="w3-row w3-padding w3-black">
		<div class="w3-col s3">
		  <a href="#VOLVER" onClick="location='opciones.html'" class="w3-button w3-block w3-black">VOLVER</a>
		</div>
		<div class="w3-col s3">
			<a href="#GUARDAR" id="download"  class="w3-button w3-block w3-black">GUARDAR</a>
		</div>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
		</center>
	  </div>
	</div>

	<!-- Botones para las modalidades -->

	<br><br><br>
	<center><p><button class="w3-button w3-black" type="submit" name ="botón1" id="botón1" onClick="lanzar(); turnos();" style="width: 200px;">LANZAR DADO JUGADOR 1</button><img id="morado" src="morado.jpg"> 
		<img id="11" src="1.png"> <img id="21" src="2.png"> <img id="31" src="3.png"> <img id="41" src="4.png"> <img id="51" src="5.png"> <img id="61" src="6.png"> </p></center>
	
	<center><p><button class="w3-button w3-black" type="submit" name ="botón2" id="botón2" onClick="lanzar2(); turnos();" style="width: 200px">LANZAR DADO JUGADOR 2</button><img id="amarillo" src="amarillo.jpg">
		<img id="12" src="1.png"> <img id="22" src="2.png"> <img id="32" src="3.png"> <img id="42" src="4.png"> <img id="52" src="5.png"> <img id="62" src="6.png"> </p></center>
	
	<center><p><button class="w3-button w3-black" type="submit" name ="botón3" id="botón3" onClick="lanzar3(); turnos2();" style="width: 200px">LANZAR DADO</button><img id="morado2" src="morado.jpg">
		<img id="13" src="1.png"> <img id="23" src="2.png"> <img id="33" src="3.png"> <img id="43" src="4.png"> <img id="53" src="5.png"> <img id="63" src="6.png"> </p></center>
	
	<center><p><button class="w3-button w3-black" type="submit" name ="botón4" id="botón4" style="width: 200px">BOT</button><img id="amarillo2" src="amarillo2.jpg">
		<img id="14" src="1.png"> <img id="24" src="2.png"> <img id="34" src="3.png"> <img id="44" src="4.png"> <img id="54" src="5.png"> <img id="64" src="6.png"> </p></center>

	<br>
	<script>
	
	var x = 2;   localStorage.lanzar = x;
	var x2 = 2;  localStorage.lanzar2 = x2;
	var x3 = 2;  localStorage.lanzar3 = x3;
	var x4 = 2;  localStorage.lanzar4 = x4;
	var turnosV = 1;

	html2canvas(document.body, 
	{
		onrendered (canvas)
		{
			var link = document.getElementById('download');;
    		var image = canvas.toDataURL();
    		link.href = image;
    		link.download = 'TABLERO GENERADO.png';	
  		}
 	});

	// Al empezar, se oculta los dados de ambas modalidades.
	
	ocultaDados1(); ocultaDados2();
	ocultaDados3(); ocultaDados4();

	function ocultaDados1()
	{
		document.getElementById('11').style.display='none';	 document.getElementById('21').style.display='none';	
		document.getElementById('31').style.display='none';	 document.getElementById('41').style.display='none'; 
		document.getElementById('51').style.display='none';  document.getElementById('61').style.display='none'; 		
	}

	function ocultaDados2()
	{
		document.getElementById('12').style.display='none';  document.getElementById('22').style.display='none';
		document.getElementById('32').style.display='none';  document.getElementById('42').style.display='none';
		document.getElementById('52').style.display='none';  document.getElementById('62').style.display='none'; 
	}

	function ocultaDados3()
	{
		document.getElementById('13').style.display='none';  document.getElementById('23').style.display='none';
	    document.getElementById('33').style.display='none';  document.getElementById('43').style.display='none';
		document.getElementById('53').style.display='none';  document.getElementById('63').style.display='none'; 
	}

	function ocultaDados4()
	{
		document.getElementById('14').style.display='none';  document.getElementById('24').style.display='none';
		document.getElementById('34').style.display='none';  document.getElementById('44').style.display='none';
		document.getElementById('54').style.display='none';  document.getElementById('64').style.display='none'; 
	}
	
	// Ver la modalidad para así seleccionar los botones a usar.

    if(localStorage.modalidad=="1VBOT")
	{
		document.getElementById('botón1').style.display = 'none';
		document.getElementById('botón2').style.display = 'none';
		document.getElementById('morado').style.display = 'none';
		document.getElementById('amarillo').style.display = 'none';
		document.getElementById('botón4').disabled = true;
	}
	else
	{
		document.getElementById('botón3').style.display = 'none';
		document.getElementById('morado2').style.display = 'none';
		document.getElementById('botón4').style.display = 'none';
		document.getElementById('amarillo2').style.display = 'none';
	}

	// Mover el jugador 1 por medio del botón 1 (Modalidad 1V1).

	function lanzar()
    {
		x=1; localStorage.lanzar=x; turnosV=2;
		if(player.spot+player.roll<=tiles.length-1 )
		{
			if(player.roll==6)
			{
				document.getElementById('61').style.display='unset'; turnosV=1; 
			}
			else
			{
				turnosV=2;
				if(player.roll==1) { document.getElementById('11').style.display='unset'; }
				if(player.roll==2) { document.getElementById('21').style.display='unset'; }
				if(player.roll==3) { document.getElementById('31').style.display='unset'; }
				if(player.roll==4) { document.getElementById('41').style.display='unset'; }
				if(player.roll==5) { document.getElementById('51').style.display='unset'; }
			}
		ocultaDados2();
		}
		else
		{
			if(player.roll==1) { document.getElementById('11').style.display='unset'; }
			if(player.roll==2) { document.getElementById('21').style.display='unset'; }
			if(player.roll==3) { document.getElementById('31').style.display='unset'; }
			if(player.roll==4) { document.getElementById('41').style.display='unset'; }
			if(player.roll==5) { document.getElementById('51').style.display='unset'; }
			player.next=player.spot; ocultaDados2(); turnosV=2;
			if(player.roll==6) { document.getElementById('61').style.display='unset'; turnosV=1; }
		}
		if(player.spot+player.roll==tiles.length-1 ) { alert("El jugador 1 ha ganado."); location='index.html'; }
	}

	// Mover el jugador 2 por medio del botón 2 (Modalidad 1V1).
	
	function lanzar2()
	{
		x2=1; localStorage.lanzar2=x2;
		if(player2.spot+player2.roll<=tiles.length-1 )
		{
			if(player2.roll==6)
			{
				document.getElementById('62').style.display='unset'; turnosV=2; 
			}
			else
			{
				turnosV=1;
				if(player2.roll==1) { document.getElementById('12').style.display='unset'; }
				if(player2.roll==2) { document.getElementById('22').style.display='unset'; }
				if(player2.roll==3) { document.getElementById('32').style.display='unset'; }
				if(player2.roll==4) { document.getElementById('42').style.display='unset'; }
				if(player2.roll==5) { document.getElementById('52').style.display='unset'; }
			}
			ocultaDados1();
		}
		else
		{
			if(player2.roll==1) { document.getElementById('12').style.display='unset'; }
			if(player2.roll==2) { document.getElementById('22').style.display='unset'; }
			if(player2.roll==3) { document.getElementById('32').style.display='unset'; }
			if(player2.roll==4) { document.getElementById('42').style.display='unset'; }
			if(player2.roll==5) { document.getElementById('52').style.display='unset'; }
			if(player2.roll==6) { document.getElementById('62').style.display='unset'; }
			player2.next=player2.spot; ocultaDados1(); turnosV=1;
			if(player2.roll==6) { document.getElementById('62').style.display='unset'; turnosV=2; }
		}
	    if(player2.spot+player2.roll==tiles.length-1 ) { alert("El jugador 2 ha ganado."); location='index.html'; }
	}

	// Mover el jugador 3 por medio del botón 3 (Modalidad 1VBOT).

	function lanzar3()
	{
		x3=1; localStorage.lanzar3=x3;
		if(player3.spot+player3.roll<=tiles.length-1 )
		{
			if(player3.roll==6)
			{
				document.getElementById('63').style.display='unset'; turnosV=2; setTimeout(turnos2,3000);
			}
			else
			{
				turnosV=1;
				if(player3.roll==1) { document.getElementById('13').style.display='unset'; }
				if(player3.roll==2) { document.getElementById('23').style.display='unset'; }
				if(player3.roll==3) { document.getElementById('33').style.display='unset'; }
				if(player3.roll==4) { document.getElementById('43').style.display='unset'; }
				if(player3.roll==5) { document.getElementById('53').style.display='unset'; }
				setTimeout(lanzar4,3000);
			}
			ocultaDados4();
		}
		else
		{
			if(player3.roll==1) { document.getElementById('13').style.display='unset'; }
			if(player3.roll==2) { document.getElementById('23').style.display='unset'; }
			if(player3.roll==3) { document.getElementById('33').style.display='unset'; }
			if(player3.roll==4) { document.getElementById('43').style.display='unset'; }
			if(player3.roll==5) { document.getElementById('53').style.display='unset'; }
			player3.next=player3.spot; ocultaDados4(); turnosV=1;
			if(player3.roll==6) { document.getElementById('63').style.display='unset'; turnosV=2; setTimeout(turnos2,3000) }
			setTimeout(lanzar4,3000);
		}
		if(player3.spot+player3.roll==tiles.length-1 ) { alert("El jugador 1 ha ganado."); location='index.html'; }
	}

	// VERIFICAR EL DADO 6 CON EL TIMER

	// Mover al bot por medio del botón 3 (Modalidad 1VBOT).

	function lanzar4()
	{
		x4=1; localStorage.lanzar4=x4;
		if(playerbot.spot+playerbot.roll<=tiles.length-1 )
		{
			if(playerbot.roll==6)
			{
				document.getElementById('64').style.display='unset'; document.getElementById('botón3').disabled = true; setTimeout(lanzar4,3000); 
			}
			else
			{
				turnosV=2;
				if(playerbot.roll==1) { document.getElementById('14').style.display='unset'; }
				if(playerbot.roll==2) { document.getElementById('24').style.display='unset'; }
				if(playerbot.roll==3) { document.getElementById('34').style.display='unset'; }
				if(playerbot.roll==4) { document.getElementById('44').style.display='unset'; }
				if(playerbot.roll==5) { document.getElementById('54').style.display='unset'; }
			}
			ocultaDados3();
		}
		else
		{
			if(playerbot.roll==1) { document.getElementById('14').style.display='unset'; }
			if(playerbot.roll==2) { document.getElementById('24').style.display='unset'; }
			if(playerbot.roll==3) { document.getElementById('34').style.display='unset'; }
			if(playerbot.roll==4) { document.getElementById('44').style.display='unset'; }
			if(playerbot.roll==5) { document.getElementById('54').style.display='unset'; }
			playerbot.next=playerbot.spot; ocultaDados3(); turnosV=2;
			if(playerbot.roll==6) { document.getElementById('64').style.display='unset'; document.getElementById('botón3').disabled = true; setTimeout(lanzar4,3000); }
		}
		setTimeout(turnos2,3000);
		if(playerbot.spot+playerbot.roll==tiles.length-1 ) { alert("El bot ha ganado."); location='index.html'; }
	}

	// Nos servirá para intercalar los turnos (Modalidad 1V1).

	function turnos()
	{
		if((turnosV % 2)==0)
		{
			document.getElementById('botón1').disabled = true;
			document.getElementById('botón2').disabled = false;
		}
		else
		{
			document.getElementById('botón2').disabled = true;
		    document.getElementById('botón1').disabled = false;
		}
	}

	function turnos2()
	{
		if((turnosV % 2)==0)
		{
			document.getElementById('botón3').disabled = false;
		}
		else
		{
			document.getElementById('botón3').disabled = true;
		}
	}
		
	</script>
</body>
</html>
